@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Prize Manager Dark Theme - Chess Professional */
    --background: 210 15% 6%;
    --foreground: 210 10% 96%;

    --card: 210 12% 10%;
    --card-foreground: 210 10% 96%;

    --popover: 210 14% 8%;
    --popover-foreground: 210 10% 96%;

    /* Primary: Teal #1F6E5B */
    --primary: 162 54% 27%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 162 54% 32%;

    /* Secondary: Navy #0B3D91 */
    --secondary: 219 84% 31%;
    --secondary-foreground: 0 0% 100%;
    --secondary-hover: 219 84% 36%;

    /* Accent: Gold #CDAA59 */
    --accent: 42 55% 58%;
    --accent-foreground: 210 15% 6%;
    --accent-hover: 42 60% 63%;

    /* Grays */
    --muted: 210 12% 15%;
    --muted-foreground: 210 8% 60%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;

    --border: 210 12% 18%;
    --input: 210 12% 15%;
    --ring: 162 54% 27%;

    --radius: 0.5rem;

    /* Status Colors */
    --status-draft: 210 12% 25%;
    --status-finalized: 162 54% 27%;
    --status-published: 42 55% 58%;

    /* Success/Warning/Info */
    --success: 142 76% 36%;
    --warning: 38 92% 50%;
    --info: 199 89% 48%;

    /* Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Hide Lovable badge overlays in production/public pages */
[data-lovable-badge],
[data-lovable="badge"],
#lovable-badge,
[id*="lovable-badge"],
.lovable-badge,
[class*="lovable-badge"],
[class*="lovable-brand"],
a[href*="lovable.dev"][aria-label*="Lovable"],
a[href*="lovable.app"][aria-label*="Lovable"],
a[href*="lovableproject.com"][aria-label*="Lovable"] {
  display: none !important;
  visibility: hidden !important;
}

@media print {
  @page {
    margin: 12mm;
    size: A4;
  }

  /* Preserve colors in print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    min-height: auto !important;
  }

  body {
    font-size: 11pt;
    line-height: 1.4;
  }

  a {
    color: inherit !important;
    text-decoration: none !important;
  }

  /* Print container */
  .pm-print-page {
    width: 100%;
    max-width: 210mm;
    margin: 0 auto;
    padding-top: 0 !important;
  }

  /* Avoid page breaks inside elements */
  .pm-print-avoid-break {
    page-break-inside: avoid;
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
  }

  /* Hide elements in print (toolbars, buttons, etc.) */
  .pm-print-hide {
    display: none !important;
  }

  /* Printable header visible in print */
  .pm-print-header {
    display: block !important;
  }

  /* Hide Lovable badge overlays in print/PDF output */
  [data-lovable-badge],
  [data-lovable="badge"],
  #lovable-badge,
  [id*="lovable-badge"],
  .lovable-badge,
  [class*="lovable-badge"],
  [class*="lovable-brand"],
  a[href*="lovable.dev"][aria-label*="Lovable"],
  a[href*="lovable.app"][aria-label*="Lovable"],
  a[href*="lovableproject.com"][aria-label*="Lovable"] {
    display: none !important;
    visibility: hidden !important;
  }

  .min-h-screen {
    min-height: auto !important;
  }

  /* Table rows should not split */
  table tr {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Poster grid sizing */
  .pm-poster-grid {
    width: 100% !important;
    max-width: 186mm !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Poster Grid print - page margins and layout */
  .pm-poster-grid {
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
  }

  .pm-poster-grid .poster-grid-cards {
    align-content: start;
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    gap: 8mm !important;
    padding: 0 !important;
  }

  .pm-poster-grid .poster-grid-card {
    min-height: 55mm;
    max-height: 80mm;
    padding: 12px !important;
    gap: 8px !important;
    border: 1.5pt solid #1f2937 !important;
    border-radius: 4px !important;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%) !important;
    break-inside: avoid;
    page-break-inside: avoid;
    -webkit-column-break-inside: avoid;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    overflow: hidden;
  }

  .pm-poster-grid .poster-grid-card * {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .pm-poster-grid .poster-grid-name {
    font-size: 1.1rem !important;
    font-weight: 700 !important;
    line-height: 1.2 !important;
  }

  /* Poster grid print badges */
  .pm-poster-grid .poster-grid-card .badge,
  .pm-poster-grid .poster-grid-card [class*="bg-primary"],
  .pm-poster-grid .poster-grid-card [class*="bg-success"] {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Remove shadows in print for cleaner look */
  .shadow, .shadow-lg, .shadow-sm {
    box-shadow: none !important;
  }

  /* Poster grid page setup - fit ~9 cards per page (3x3) */
  @page poster-grid {
    margin: 8mm;
    size: A4 portrait;
  }

  /* Category cards print rules - robust index-based selectors */
  [data-category-card] {
    page-break-inside: avoid;
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
    margin-bottom: 4mm;
  }

  /* Page break BEFORE each card EXCEPT the first (index 0) */
  [data-category-card][data-print-index]:not([data-print-index="0"]) {
    break-before: page;
    page-break-before: always;
  }

  /* Ensure first card has NO page break before it */
  [data-category-card][data-print-index="0"] {
    break-before: auto !important;
    page-break-before: auto !important;
    break-inside: auto !important;
    page-break-inside: auto !important;
    -webkit-column-break-inside: auto !important;
  }

  /* Print settings note - only visible in print */
  .pm-print-settings-note {
    display: block !important;
  }
}
